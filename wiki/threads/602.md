# scripting for a zm_mod
Game Modding | Call of Duty: Black Ops 3 | Scripting

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Thread By: m1cke<br />What .gsc i need to add to change starting weapon on my mod <br /><br />i&#39;ve tried so mutch like the _clientids.gsc adding a script for the change weapon in another .gsc and <br /><br />scripts\shared\callbacks_shared;<br /><br /><br /><br />[CODE=php]<br />#using scripts\shared\flag_shared;<br /><br /><br /><br />function giveweapon()<br />{<br /><br />    startingWeapon = &quot;mauser&quot;;<br />    weapon = getWeapon(startingWeapon);<br />    level.start_weapon = (weapon);<br />}<br /><br /><br />#using scripts\zm\giveweapon;<br />#using scripts\codescripts\struct;<br /><br />#using scripts\shared\callbacks_shared;<br />#using scripts\shared\system_shared;<br /><br />#insert scripts\shared\shared.gsh;<br /><br />#namespace clientids;<br /><br />REGISTER_SYSTEM( &quot;clientids&quot;, &amp;__init__, undefined )<br /><br />function __init__()<br />{<br />callback::on_start_gametype( &amp;init );<br />callback::on_connect( &amp;on_player_connect );<br />}<br /><br />function init()<br />{<br />// this is now handled in code ( not lan )<br />// see s_nextScriptClientId <br />level.clientid = 0;<br />    level thread giveweapon::giveplayerweapon();<br /><br /><br />}<br /><br />function on_player_connect()<br />{<br />level thread lots_o_points();<br />self.clientid = matchRecordNewPlayer( self );<br />if ( !isdefined( self.clientid ) || self.clientid == -1 )<br />{<br />self.clientid = level.clientid;<br />level.clientid++;// Is this safe? What if a server runs for a long time and many people join/leave<br />}<br /><br />}<br />[/CODE]</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Koan<br />Here is a guide in our Wiki explaining how to change your starting weapon. <a href="http://phabricator.aviacreations.com/w/black_ops_3/basics/change_start_weapon/">http://phabricator.aviacreations.com/w/black_ops_3/basics/change_start_weapon/</a><br /><br /><br /><br />Also, for future reference, please make sure you put all code in code tags, I&#39;ve done it for you this time. Thanks.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: m1cke<br />you can se my function giveweapon i use the code on the wiki and i call it from init but it dosen&#39;t work</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: DTZxPorter<br /><blockquote><em>m1cke</em>you can se my function giveweapon i use the code on the wiki and i call it from init but it dosen&#39;t work</blockquote><br /><br />You should be calling it from where It says in the wiki, not some script you make.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: m1cke<br /><blockquote><em>DTZxPorter</em><blockquote><em>m1cke</em>you can se my function giveweapon i use the code on the wiki and i call it from init but it dosen&#39;t work</blockquote><br /><br />You should be calling it from where It says in the wiki, not some script you make.</blockquote><br /><br />okay porter so i call it from main?</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: m1cke<br />[CODE=php]function main( )<br />{<br />	globallogic::init();<br /><br />	GlobalLogic_SetupDefault_ZombieCallbacks();<br />	<br />	menu_init();<br />	<br />	//util::registerRoundLimit( minValue, maxValue )<br />	util::registerRoundLimit( 1, 1 );<br />	<br />	//util::registerTimeLimit( minValue, maxValue )<br />	util::registerTimeLimit( 0, 0 );<br />	<br />	//util::registerScoreLimit( minValue, maxValue )<br />	util::registerScoreLimit( 0, 0 );<br />	<br />	//util::registerRoundWinLimit( minValue, maxValue )<br />	util::registerRoundWinLimit( 0, 0 );<br />	<br />	//util::registerNumLives( minValue, maxValue )<br />	util::registerNumLives( 1, 1 );<br /><br /><br /><br />    startingWeapon = &quot;mauser&quot;;<br />    weapon = getWeapon(startingWeapon);<br />    level.start_weapon = (weapon);<br /><br />	weapons::registerGrenadeLauncherDudDvar( level.gameType, 10, 0, 1440 );<br />	weapons::registerThrownGrenadeDudDvar( level.gameType, 0, 0, 1440 );<br />	weapons::registerKillstreakDelay( level.gameType, 0, 0, 1440 );<br /><br />	globallogic::registerFriendlyFireDelay( level.gameType, 15, 0, 1440 );<br /><br /><br />	level.player_starting_points = 75000;<br />	level.takeLivesOnDeath = true;<br />	level.teamBased = true;<br />	level.disablePrematchMessages = true;	//NEW<br />	level.disableMomentum = true;			//NEW<br />	<br />	level.overrideTeamScore = false;<br />	level.overridePlayerScore = false;<br />	level.displayHalftimeText = false;<br />	level.displayRoundEndText = false;<br />	<br />	level.allowAnnouncer = false;<br />	//level.allowZmbAnnouncer = true;<br />	<br />	level.endGameOnScoreLimit = false;<br />	level.endGameOnTimeLimit = false;<br />	level.resetPlayerScoreEveryRound = true;<br />	<br />	level.doPrematch = false;<br />	level.noPersistence = true;<br />	level.cumulativeRoundScores = true;<br />	<br />	level.forceAutoAssign = true;<br />	level.dontShowEndReason = true;<br />	level.forceAllAllies = true;			//NEW<br />	<br />	//DISABLE TEAM SWAP<br />	level.allow_teamchange = false;<br />	SetDvar( &quot;scr_disable_team_selection&quot;, 1 );<br />	//makeDvarServerInfo( &quot;scr_disable_team_selection&quot;, 1 );<br />	<br />	SetDvar( &quot;scr_disable_weapondrop&quot;, 1 );<br />	<br />	level.onStartGameType = &amp;onStartGameType;<br />//	level.onSpawnPlayer = &amp;onSpawnPlayer;<br />	level.onSpawnPlayer = &amp;globallogic::blank;<br />	level.onSpawnPlayerUnified = &amp;onSpawnPlayerUnified;<br />	level.onRoundEndGame = &amp;onRoundEndGame;<br />	//level.giveCustomLoadout = &amp;giveCustomLoadout;<br />	level.playerMaySpawn = &amp;maySpawn;<br /><br />	zm_utility::set_game_var(&quot;ZM_roundLimit&quot;, 1);<br />	zm_utility::set_game_var(&quot;ZM_scoreLimit&quot;, 1);<br /><br />	zm_utility::set_game_var(&quot;_team1_num&quot;, 0);<br />	zm_utility::set_game_var(&quot;_team2_num&quot;, 0);<br />	<br />	map_name = level.script;<br /><br />	//level.gamemode_match = spawnstruct();	<br /><br />	mode = GetDvarString( &quot;ui_gametype&quot; );<br />	<br />	if((!isdefined(mode) || mode == &quot;&quot;) &amp;&amp; isdefined(level.default_game_mode))<br />	{<br />		mode = level.default_game_mode;<br />	}<br />	<br />	zm_utility::set_gamemode_var_once(&quot;mode&quot;, mode);<br />	<br />	zm_utility::set_game_var_once(&quot;side_selection&quot;, 1);<br />	<br />	location = level.default_start_location;<br />	zm_utility::set_gamemode_var_once(&quot;location&quot;, location);<br />	<br /><br />	//* level.gamemode_match.num_rounds = GetDvarInt(&quot;zm_num_rounds&quot;);<br />	//level.gamemode_match.rounds = [];<br />	zm_utility::set_gamemode_var_once(&quot;randomize_mode&quot;, GetDvarInt(&quot;zm_rand_mode&quot;));<br />	zm_utility::set_gamemode_var_once(&quot;randomize_location&quot;, GetDvarInt(&quot;zm_rand_loc&quot;));<br />	zm_utility::set_gamemode_var_once(&quot;team_1_score&quot;, 0);<br />	zm_utility::set_gamemode_var_once(&quot;team_2_score&quot;, 0);<br />	zm_utility::set_gamemode_var_once(&quot;current_round&quot;, 0);<br />	zm_utility::set_gamemode_var_once(&quot;rules_read&quot;, false);<br />	zm_utility::set_game_var_once(&quot;switchedsides&quot;, false);<br />	<br />	gametype = GetDvarString(&quot;ui_gametype&quot;);<br />	<br />	game[&quot;dialog&quot;][&quot;gametype&quot;] = gametype + &quot;_start&quot;;<br />	game[&quot;dialog&quot;][&quot;gametype_hardcore&quot;] = gametype + &quot;_start&quot;;<br />	game[&quot;dialog&quot;][&quot;offense_obj&quot;] = &quot;generic_boost&quot;;<br />	game[&quot;dialog&quot;][&quot;defense_obj&quot;] = &quot;generic_boost&quot;;<br />	<br />	zm_utility::set_gamemode_var(&quot;pre_init_zombie_spawn_func&quot;, undefined);<br />	zm_utility::set_gamemode_var(&quot;post_init_zombie_spawn_func&quot;, undefined);<br />	zm_utility::set_gamemode_var(&quot;match_end_notify&quot;, undefined);<br />	zm_utility::set_gamemode_var(&quot;match_end_func&quot;, undefined);<br />	<br />	// Sets the scoreboard columns and determines with data is sent across the network<br />	setscoreboardcolumns( &quot;score&quot;, &quot;kills&quot;, &quot;downs&quot;, &quot;revives&quot;, &quot;headshots&quot; ); <br />	callback::on_connect( &amp;onPlayerConnect_check_for_hotjoin);<br />	// level thread module_hud_connecting();<br />	tempboxfix::init(  );<br />}<br /><br /><br /><br />[/CODE]<br /><br />Im using zm_gametype main for the change starting weapon and change starting points for my gun mod</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Koan<br /><blockquote><em>m1cke</em>(code)<br /><br /><br /><br />Im using zm_gametype main for the change starting weapon and change starting points for my gun mod</blockquote><br /><br /><br /><br />No, that&#39;s wrong. Follow the tutorial properly.<br /><br /><br /><br />In your <span style="text-decoration: underline">mapname.gsc</span> (for example zm_giant.gsc), find the line &quot;zm_usermap::main();&quot;, then add the code provided underneath it.<br /><br /><br /><br />You&#39;re calling it from some other main function. Nowhere in the tutorial does it ask you to do this.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: m1cke<br /><blockquote><em>Koan</em><blockquote><em>m1cke</em>(code)<br /><br /><br /><br />Im using zm_gametype main for the change starting weapon and change starting points for my gun mod</blockquote><br /><br /><br /><br />No, that&#39;s wrong. Follow the tutorial properly.<br /><br /><br /><br />In your <span style="text-decoration: underline">mapname.gsc</span> (for example zm_giant.gsc), find the line &quot;zm_usermap::main();&quot;, then add the code provided underneath it.<br /><br /><br /><br />You&#39;re calling it from some other main function. Nowhere in the tutorial does it ask you to do this.</blockquote><br /><br />I don&#39;t have a mapname.gsc becuse im making a mod so what .gsc should i use</p>
