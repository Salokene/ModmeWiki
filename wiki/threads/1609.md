# Help with new TX-T7 rig and updated azsry rig
Game Modding | Call of Duty: Black Ops 3 | Models & Animation

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Thread By: ElTitoPricus<br /><p style="text-align:left;">hello</p><p style="text-align:left;"></p><p style="text-align:left;">When i try to drag the setupArmRig.mel to any of these rigs into an idle animation</p><p style="text-align:left;">to make slides, wallruns and sprints for WAW the left arm is distorted to the max:</p><p style="text-align:left;"></p><p style="text-align:left;"><img style="max-width: 500px;" src="http://image.prntscr.com/image/9081dfb22297484092676386f07b1181.png"></p><p style="text-align:left;"></p><p style="text-align:left;">The setupArmRig.mel contains this:</p><p style="text-align:left;"></p>[CODE=php]//Rename T7 rig to remove ambiguous joint names<br />$namespaceToFind=&quot;t7&quot;; //takes regular expressions, too<br /><br />$select =`ls`;<br />for ($sel in $select) <br />{<br />	string $buffer[] ;<br />	catchQuiet(`tokenize $sel &quot;:&quot; $buffer`) ;<br />	if($buffer[0] == $namespaceToFind)<br />	{<br />		catchQuiet(`rename $sel ($sel + &quot;_&quot; + $namespaceToFind)`);<br />	}<br />	<br />}<br /><br />// Remove namespaces<br />string $allNodes[] = `ls` ;<br /><br />// Loop Through Them<br />for($node in $allNodes) {<br /><br /> // Tokenize And Rename<br /> string $buffer[] ;<br /> tokenize $node &quot;:&quot; $buffer ;<br /> string $newName = $buffer[size($buffer)-1] ;<br /> catchQuiet(`rename $node $newName`) ;<br /><br />}<br /><br />//Create Nurbs Circles as controllers<br />circle -c 0 0 0 -nr 0 0 1 -sw 360 -r 10 -d 3 -ut 0 -tol 0.01 -s 8 -ch 1; objectMoveCommand;<br />circle -c 0 0 0 -nr 0 0 1 -sw 360 -r 10 -d 3 -ut 0 -tol 0.01 -s 8 -ch 1; objectMoveCommand;<br />circle -c 0 0 0 -nr 0 0 1 -sw 360 -r 10 -d 3 -ut 0 -tol 0.01 -s 8 -ch 1; objectMoveCommand;<br />circle -c 0 0 0 -nr 0 0 1 -sw 360 -r 10 -d 3 -ut 0 -tol 0.01 -s 8 -ch 1; objectMoveCommand;<br />circle -c 0 0 0 -nr 0 0 1 -sw 360 -r 10 -d 3 -ut 0 -tol 0.01 -s 8 -ch 1; objectMoveCommand;<br /><br />parent nurbsCircle1 j_shoulder_le ;<br />setAttr &quot;nurbsCircle1.translateX&quot; 0;<br />setAttr &quot;nurbsCircle1.translateY&quot; 0;<br />setAttr &quot;nurbsCircle1.translateZ&quot; 0;<br />setAttr &quot;nurbsCircle1.rotateX&quot; 0;<br />setAttr &quot;nurbsCircle1.rotateY&quot; 0;<br />setAttr &quot;nurbsCircle1.rotateZ&quot; 0;<br />setAttr &quot;nurbsCircle1.rotateY&quot; 90;<br />rename nurbsCircle1 LE_Shoulder_CTR;<br /><br />parent nurbsCircle2 j_wrist_le ;<br />setAttr &quot;nurbsCircle2.translateX&quot; 0;<br />setAttr &quot;nurbsCircle2.translateY&quot; 0;<br />setAttr &quot;nurbsCircle2.translateZ&quot; 0;<br />setAttr &quot;nurbsCircle2.rotateX&quot; 0;<br />setAttr &quot;nurbsCircle2.rotateY&quot; 90;<br />setAttr &quot;nurbsCircle2.rotateZ&quot; 0;<br />rename nurbsCircle2 LE_Wrist_CTR;<br /><br />parent nurbsCircle3 j_shoulder_ri ;<br />setAttr &quot;nurbsCircle3.translateX&quot; 0;<br />setAttr &quot;nurbsCircle3.translateY&quot; 0;<br />setAttr &quot;nurbsCircle3.translateZ&quot; 0;<br />setAttr &quot;nurbsCircle3.rotateX&quot; 0;<br />setAttr &quot;nurbsCircle3.rotateY&quot; 90;<br />setAttr &quot;nurbsCircle3.rotateZ&quot; 0;<br />rename nurbsCircle3 RI_Shoulder_CTR;<br /><br />parent nurbsCircle4 j_wrist_ri ;<br />setAttr &quot;nurbsCircle4.translateX&quot; 0;<br />setAttr &quot;nurbsCircle4.translateY&quot; 0;<br />setAttr &quot;nurbsCircle4.translateZ&quot; 0;<br />setAttr &quot;nurbsCircle4.rotateX&quot; 0;<br />setAttr &quot;nurbsCircle4.rotateY&quot; 90;<br />setAttr &quot;nurbsCircle4.rotateZ&quot; 0;<br />rename nurbsCircle4 RI_Wrist_CTR;<br /><br />parent nurbsCircle5 tag_weapon ;<br />setAttr &quot;nurbsCircle5.translateX&quot; 0;<br />setAttr &quot;nurbsCircle5.translateY&quot; 0;<br />setAttr &quot;nurbsCircle5.translateZ&quot; 0;<br />setAttr &quot;nurbsCircle5.rotateX&quot; 0;<br />setAttr &quot;nurbsCircle5.rotateY&quot; 90;<br />setAttr &quot;nurbsCircle5.rotateZ&quot; 0;<br />rename nurbsCircle5 Gun_CTR;<br /><br />//Create Locators as Pole Vectors<br />spaceLocator -p 0 0 0;<br />spaceLocator -p 0 0 0;<br />rename locator1 LE_PoleV;<br />rename locator2 RI_PoleV;<br /><br />//Set up Left PoleV<br />setAttr &quot;LE_PoleV.scaleX&quot; 10;<br />setAttr &quot;LE_PoleV.scaleY&quot; 10;<br />setAttr &quot;LE_PoleV.scaleZ&quot; 10;<br />parent LE_PoleV j_elbow_le ;<br />setAttr &quot;LE_PoleV.translateX&quot; 0;<br />setAttr &quot;LE_PoleV.translateY&quot; 0;<br />setAttr &quot;LE_PoleV.translateZ&quot; 0;<br />setAttr &quot;LE_PoleV.rotateX&quot; 0;<br />setAttr &quot;LE_PoleV.rotateY&quot; 0;<br />setAttr &quot;LE_PoleV.rotateZ&quot; 0;<br /><br />//Set up Right PoleV<br />setAttr &quot;RI_PoleV.scaleX&quot; 10;<br />setAttr &quot;RI_PoleV.scaleY&quot; 10;<br />setAttr &quot;RI_PoleV.scaleZ&quot; 10;<br />parent RI_PoleV j_elbow_ri ;<br />setAttr &quot;RI_PoleV.translateX&quot; 0;<br />setAttr &quot;RI_PoleV.translateY&quot; 0;<br />setAttr &quot;RI_PoleV.translateZ&quot; 0;<br />setAttr &quot;RI_PoleV.rotateX&quot; 0;<br />setAttr &quot;RI_PoleV.rotateY&quot; 0;<br />setAttr &quot;RI_PoleV.rotateZ&quot; 0;<br /><br />select -cl;<br />select -r LE_Shoulder_CTR;<br />select -add LE_Wrist_CTR;<br />select -add RI_Shoulder_CTR;<br />select -add RI_Wrist_CTR;<br />select -add Gun_CTR;<br />select -add LE_PoleV;<br />select -add RI_PoleV;<br />parent -world;<br /><br />// Transfer key at first frame from bones to controllers<br />int $animStart = `playbackOptions -ast 0`;<br />int $animEnd = `playbackOptions -aet 60`;<br /><br />currentTime $animStart;<br /><br />parent LE_Shoulder_CTR j_shoulder_le ;<br />parent LE_Wrist_CTR j_wrist_le ;<br />parent RI_Shoulder_CTR j_shoulder_ri ;<br />parent RI_Wrist_CTR j_wrist_ri ;<br />parent Gun_CTR tag_weapon ;<br />parent RI_PoleV j_elbow_ri ;<br />parent LE_PoleV j_elbow_le ;<br /><br />setAttr &quot;LE_Shoulder_CTR.translateX&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.translateY&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.translateZ&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.rotateX&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.rotateY&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.rotateZ&quot; 0;<br />setAttr &quot;LE_Shoulder_CTR.rotateY&quot; 90;<br /><br />setAttr &quot;LE_Wrist_CTR.translateX&quot; 0;<br />setAttr &quot;LE_Wrist_CTR.translateY&quot; 0;<br />setAttr &quot;LE_Wrist_CTR.translateZ&quot; 0;<br />setAttr &quot;LE_Wrist_CTR.rotateX&quot; 0;<br />setAttr &quot;LE_Wrist_CTR.rotateY&quot; 90;<br />setAttr &quot;LE_Wrist_CTR.rotateZ&quot; 0;<br /><br />setAttr &quot;RI_Shoulder_CTR.translateX&quot; 0;<br />setAttr &quot;RI_Shoulder_CTR.translateY&quot; 0;<br />setAttr &quot;RI_Shoulder_CTR.translateZ&quot; 0;<br />setAttr &quot;RI_Shoulder_CTR.rotateX&quot; 0;<br />setAttr &quot;RI_Shoulder_CTR.rotateY&quot; 90;<br />setAttr &quot;RI_Shoulder_CTR.rotateZ&quot; 0;<br /><br />setAttr &quot;RI_Wrist_CTR.translateX&quot; 0;<br />setAttr &quot;RI_Wrist_CTR.translateY&quot; 0;<br />setAttr &quot;RI_Wrist_CTR.translateZ&quot; 0;<br />setAttr &quot;RI_Wrist_CTR.rotateX&quot; 0;<br />setAttr &quot;RI_Wrist_CTR.rotateY&quot; 90;<br />setAttr &quot;RI_Wrist_CTR.rotateZ&quot; 0;<br /><br />setAttr &quot;Gun_CTR.translateX&quot; 0;<br />setAttr &quot;Gun_CTR.translateY&quot; 0;<br />setAttr &quot;Gun_CTR.translateZ&quot; 0;<br />setAttr &quot;Gun_CTR.rotateX&quot; 0;<br />setAttr &quot;Gun_CTR.rotateY&quot; 90;<br />setAttr &quot;Gun_CTR.rotateZ&quot; 0;<br /><br />setAttr &quot;LE_PoleV.translateX&quot; 0;<br />setAttr &quot;LE_PoleV.translateY&quot; 0;<br />setAttr &quot;LE_PoleV.translateZ&quot; 0;<br />setAttr &quot;LE_PoleV.rotateX&quot; 0;<br />setAttr &quot;LE_PoleV.rotateY&quot; 0;<br />setAttr &quot;LE_PoleV.rotateZ&quot; 0;<br /><br />setAttr &quot;RI_PoleV.translateX&quot; 0;<br />setAttr &quot;RI_PoleV.translateY&quot; 0;<br />setAttr &quot;RI_PoleV.translateZ&quot; 0;<br />setAttr &quot;RI_PoleV.rotateX&quot; 0;<br />setAttr &quot;RI_PoleV.rotateY&quot; 0;<br />setAttr &quot;RI_PoleV.rotateZ&quot; 0;<br /><br />select -cl;<br />select -r LE_Shoulder_CTR;<br />select -add RI_Shoulder_CTR;<br />select -add Gun_CTR;<br />select -add LE_PoleV;<br />select -add RI_PoleV;<br />parent -world;<br />parent LE_Wrist_CTR Gun_CTR;<br />parent RI_Wrist_CTR Gun_CTR;<br />setKeyframe -breakdown 0 -hierarchy none -controlPoints 0 -shape 0 {&quot;LE_Shoulder_CTR&quot;, &quot;LE_Wrist_CTR&quot;, &quot;RI_Shoulder_CTR&quot;, &quot;RI_Wrist_CTR&quot;, &quot;Gun_CTR&quot;, &quot;LE_PoleV&quot;, &quot;RI_PoleV&quot;};<br /><br /><br />//Delete keyframes on joints<br />cutKey -clear -time &quot;:&quot; -hierarchy none -controlPoints 0 -shape 1 {&quot;j_shoulder_le&quot;, &quot;j_elbow_le&quot;, &quot;j_wrist_le&quot;, &quot;j_shoulder_ri&quot;, &quot;j_elbow_ri&quot;, &quot;j_wrist_ri&quot;, &quot;tag_weapon&quot;};<br /><br />//Set up controller constraints to bones<br />select -r LE_Shoulder_CTR ;<br />select -add j_shoulder_le ;<br />doCreatePointConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />pointConstraint -mo -weight 1;<br /><br />select -r RI_Shoulder_CTR ;<br />select -add j_shoulder_ri ;<br />doCreatePointConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />pointConstraint -mo -weight 1;<br /><br />select -r LE_Wrist_CTR ;<br />select -add j_wrist_le;<br />doCreateOrientConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />orientConstraint -mo -weight 1;<br /><br />select -r RI_Wrist_CTR ;<br />select -add j_wrist_ri;<br />doCreateOrientConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />orientConstraint -mo -weight 1;<br /><br />select -r Gun_CTR ;<br />select -add tag_weapon;<br />doCreateParentConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />parentConstraint -mo -weight 1;<br /><br />//Set preferred angles<br />joint -e -spa -ch j_elbow_le j_shoulder_le;<br />joint -e -spa -ch j_shoulder_ri j_elbow_ri;<br /><br />ikHandle -n &quot;LE&quot; -sj j_shoulder_le -ee j_wrist_le -solver &quot;ikRPsolver&quot; -fs true;<br />ikHandle -n &quot;RI&quot; -sj j_shoulder_ri -ee j_wrist_ri -solver &quot;ikRPsolver&quot; -fs true;<br /><br />//Connect controllers to IK handles<br />select -r LE_Wrist_CTR ;<br />select -add LE ;<br />doCreateParentConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />parentConstraint -mo -weight 1;<br /><br />select -r RI_Wrist_CTR ;<br />select -add RI ;<br />doCreateParentConstraintArgList 1 { &quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;&quot;,&quot;1&quot; };<br />parentConstraint -mo -weight 1;<br /><br />//Place wrist controllers under Gun_CTR so they move with the gun<br />//select -r LE_Wrist_CTR ;<br />//select -add RI_Wrist_CTR ;<br />//select -add Gun_CTR ;<br />//parent ;<br /><br />//Set up Pole Vectors<br />select -cl  ;<br />select -r LE_PoleV ;<br />select -add LE ;<br />poleVectorConstraint -weight 1;<br /><br />select -cl  ;<br />select -r RI_PoleV ;<br />select -add RI ;<br />poleVectorConstraint -weight 1;<br />[/CODE]<br /><br /><br /><br /><p style="text-align:left;"></p><p style="text-align:left;">My script knowledege is 0, so if anyone can take a look and find out what&#39;s wrong</p><p style="text-align:left;">I will promise him a big box full of cookies </p><p style="text-align:left;"></p><p style="text-align:left;">Thanks</p><p style="text-align:left;">Tito </p></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Collie<br /><p style="text-align:left;">I&#39;m a little late, but I&#39;m very familiar with this stuff, and have created custom animations for most of my ported weapons. I do not use Aszry&#39;s rig to animate, I just use my own conversion rig. However, I can take a few logical guesses as to what the issue may be, but I&#39;m going to need a few more details. First off, just to help me understand for sure, link me to the exact rig you&#39;re using for animating the WaW guns. The script you posted looks like it&#39;s almost certainly used to create an animation rig out of an existing animation, but I want to be sure before I attempt to diagnose the issue.</p></p>
