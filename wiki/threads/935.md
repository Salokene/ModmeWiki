# [Tutorial] On_Or_Off_Zombie_Counter
Game Modding | Call of Duty: Black Ops 3 | Scripting

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Thread By: CT8918<br /> <br /> <br />This script was requested by: <a href="http://modme.co/index.php?view=forumprofile&uid=1804">Scorpiolo</a><br /> <br />I took DuaLVII&#39;s zombie counter script and modified it to allow the zombie counter to be turned on and off by a Trigger.<br /> <br />Test Footage: <a href="https://youtu.be/Bf7MQo6MTDU">On_Or_Off_Zombie_Counter_Test_Footage</a><br /> <br />Instructions:<br />1. Create a use trigger. Give the trigger the targetname of &quot;toggle_zombie_counter&quot;<br /> <br />2. Open your maps .gsc file. <br />    C:\Program Files (x86)\Steam\steamapps\common\Call of Duty Black Ops III\usermaps\your_map\scripts\zm\your_map.gsc<br /> <br />3. Add the following code at the top of your main() function:<br /><br />[CODE=php]_INIT_ZCOUNTER();[/CODE]<br /><br /> <br />4. Add the following functions at the bottom of your gsc. If you already have a version of the zombie counter, make sure you delete it.<br />[CODE=php]/*<br />FUNCTION: On_Or_Off_Zombie_Counter <br />Original Author: DuaLVII<br />On_Or_Off_Zombie_Counter Author: CT8918<br />Modified Date: 3/19/2017<br />Current Project: Mortuus_Arena<br />Function to display the amount of zombies there currently are. Added the ability to turn off and on.<br />*/ <br />//*************************************************************************************************************************************************************************************<br />//START ZOMBIE COUNTER<br />//*************************************************************************************************************************************************************************************<br />function _INIT_ZCOUNTER()<br />{<br />	ZombieCounterHuds = [];<br />	ZombieCounterHuds[&quot;LastZombieText&quot;] 	= &quot;One Zombie Left&quot;;<br />	ZombieCounterHuds[&quot;ZombieText&quot;]			= &quot;Zombies Left&quot;;<br />	ZombieCounterHuds[&quot;LastDogText&quot;]		= &quot;Dog Left&quot;;<br />	ZombieCounterHuds[&quot;DogText&quot;]			= &quot;Dog&#39;s Left&quot;;<br />	ZombieCounterHuds[&quot;NoText&quot;]				= &quot;&quot;;<br />	ZombieCounterHuds[&quot;DefaultColor&quot;]		= (1,1,1);<br />	ZombieCounterHuds[&quot;HighlightColor&quot;]		= (1, 0.55, 0);<br />	ZombieCounterHuds[&quot;FontScale&quot;]			= 1.5;<br />	ZombieCounterHuds[&quot;DisplayType&quot;]		= 0; // 0 = Shows Total Zombies and Counts down, 1 = Shows Currently spawned zombie count<br /><br />	ZombieCounterHuds[&quot;counter&quot;] = createNewHudElement(&quot;left&quot;, &quot;top&quot;, 2, 10, 1, 1.5);<br />	ZombieCounterHuds[&quot;text&quot;] = createNewHudElement(&quot;left&quot;, &quot;top&quot;, 2, 10, 1, 1.5);<br /><br />	ZombieCounterHuds[&quot;counter&quot;] hudRGBA(ZombieCounterHuds[&quot;DefaultColor&quot;], 0);<br />	ZombieCounterHuds[&quot;text&quot;] hudRGBA(ZombieCounterHuds[&quot;DefaultColor&quot;], 0);<br /><br />	level thread _THINK_ZCOUNTER(ZombieCounterHuds);<br />	level thread zombie_counter_flip_flop(); //Added by CT8918. This is what allows the user to turn the counter on or off.<br />}<br /><br />function _THINK_ZCOUNTER(hudArray)<br />{<br />	level endon(&quot;end_game&quot;);<br />	for(;;)<br />	{<br />		level waittill(&quot;start_of_round&quot;);<br />		level _ROUND_COUNTER(hudArray);<br />		hudArray[&quot;counter&quot;] SetValue(0);<br />		hudArray[&quot;text&quot;] thread hudMoveTo((2, 10, 0), 4);<br />		hudArray[&quot;counter&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 0, 1);<br />		<br />		//Added by CT8918. Only displays &quot;End of round&quot; if zombie counter is on.<br />		if(level.run_zombie_counter == true)<br />		{<br />			hudArray[&quot;text&quot;] SetText(&quot;End of round&quot;); hudArray[&quot;text&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 0, 3);<br />		}<br />	}<br />}<br /><br />//Added by CT8918. Function that allows user input to flip counter on and off.<br />function zombie_counter_flip_flop()<br />{<br />	zombie_counter_off = true;<br />	toggle_zombie_counter = GetEnt(&quot;toggle_zombie_counter&quot;, &quot;targetname&quot;);	<br />	toggle_zombie_counter SetCursorHint(&quot;HINT_NOICON&quot;);<br />	level.run_zombie_counter = false;<br /><br />	while(1)<br />	{<br />		if(zombie_counter_off == true)<br />		{<br />			toggle_zombie_counter SetHintString(&quot;^7Press ^3&amp;&amp;1 ^7to turn ^2on ^7the zombie counter.&quot;); //Added by CT8918<br />			while(1)<br />			{<br />				toggle_zombie_counter waittill(&quot;trigger&quot;, player); //Added by CT8918<br />				zombie_counter_off = false;<br />				level.run_zombie_counter = true;<br />				break;<br />			}<br />		}<br />		else<br />		{<br />			toggle_zombie_counter SetHintString(&quot;^7Press ^3&amp;&amp;1 ^7to turn ^2off ^7the zombie counter.&quot;); //Added by CT8918<br />			while(1)<br />			{<br />				toggle_zombie_counter waittill(&quot;trigger&quot;, player); //Added by CT8918<br />				zombie_counter_off = true;<br />				level.run_zombie_counter = false;<br />				break;<br />			}<br />		}<br />	}<br />}<br />function _ROUND_COUNTER(hudArray)<br />{<br />	level endon(&quot;end_of_round&quot;);<br />	lastCount = 0;<br />	numberToString = &quot;&quot;;<br />	<br />	hudArray[&quot;counter&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 1.0, 1);<br />	hudArray[&quot;text&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 1.0, 1);<br />	<br />	if(level flag::get(&quot;dog_round&quot;))<br />		hudArray[&quot;text&quot;] SetText(hudArray[&quot;DogText&quot;]);<br /><br />	for(;;)<br />	{<br />		zm_count = (zombie_utility::get_current_zombie_count() + level.zombie_total);<br />		if(hudArray[&quot;DisplayType&quot;] == 1) zm_count = zombie_utility::get_current_zombie_count();<br />		if(zm_count == 0) {wait(1); continue;}<br />		<br />		//If / else if statements added by CT8918. Allows the distinction between on and off.<br />		if(level.run_zombie_counter == true)<br />		{<br />			hudArray[&quot;counter&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 1.0, 1);<br />			hudArray[&quot;counter&quot;].fontscale = 1.5; <br />			hudArray[&quot;text&quot;] SetText(hudArray[&quot;ZombieText&quot;]);<br />			hudArray[&quot;counter&quot;] SetValue(zm_count);<br />			if(lastCount != zm_count &amp;&amp; level.run_zombie_counter == true)<br />			{<br />				lastCount = zm_count;<br />				numberToString = &quot;&quot; + zm_count;<br />				hudArray[&quot;text&quot;] thread hudMoveTo((10 + (4 * numberToString.Size), 10, 0), 4);<br />				if(zm_count == 1 &amp;&amp; !level flag::get(&quot;dog_round&quot;)) hudArray[&quot;text&quot;] SetText(hudArray[&quot;LastZombieText&quot;]);<br />				else if(zm_count == 1 &amp;&amp; level flag::get(&quot;dog_round&quot;)) hudArray[&quot;text&quot;] SetText(hudArray[&quot;LastDogText&quot;]);<br /><br />				hudArray[&quot;counter&quot;].color = hudArray[&quot;HighlightColor&quot;]; hudArray[&quot;counter&quot;].fontscale = (hudArray[&quot;FontScale&quot;] + 0.5);<br />				hudArray[&quot;text&quot;].color = hudArray[&quot;HighlightColor&quot;]; hudArray[&quot;text&quot;].fontscale = (hudArray[&quot;FontScale&quot;] + 0.5);<br />				hudArray[&quot;counter&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 1, 0.5); hudArray[&quot;counter&quot;] thread hudFontScale(hudArray[&quot;FontScale&quot;], 0.5);<br />				hudArray[&quot;text&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 1, 0.5); hudArray[&quot;text&quot;] thread hudFontScale(hudArray[&quot;FontScale&quot;], 0.5);<br />			}<br />		}<br />		else if (level.run_zombie_counter == false)<br />		{<br />			hudArray[&quot;counter&quot;] thread hudRGBA(hudArray[&quot;DefaultColor&quot;], 0, 1); //Added by CT8918. Hides the counter number.<br />			hudArray[&quot;text&quot;] SetText(hudArray[&quot;NoText&quot;]); //Added by CT8918. Hides the counter text.<br />		}<br />		wait(0.1);<br />	}<br />}<br /><br />function createNewHudElement(xAlign, yAlign, posX, posY, foreground, fontScale)<br />{<br />	hud = newHudElem();<br />	hud.horzAlign = xAlign; hud.alignX = xAlign;<br />	hud.vertAlign = yAlign; hug.alignY = yAlign;<br />	hud.x = posX; hud.y = posY;<br />	hud.foreground = foreground;<br />	hud.fontscale = fontScale;<br />	return hud;<br />}<br /><br />function hudRGBA(newColor, newAlpha, fadeTime)<br />{<br />	if(isDefined(fadeTime))<br />		self FadeOverTime(fadeTime);<br /><br />	self.color = newColor;<br />	self.alpha = newAlpha;<br />}<br /><br />function hudFontScale(newScale, fadeTime)<br />{<br />	if(isDefined(fadeTime))<br />		self ChangeFontScaleOverTime(fadeTime);<br /><br />	self.fontscale = newScale;<br />}<br /><br />function hudMoveTo(posVector, fadeTime) // Just because MoveOverTime doesn&#39;t always work as wanted<br />{<br />	initTime = GetTime();<br />	hudX = self.x;<br />	hudY = self.y;<br />	hudVector = (hudX, hudY, 0);<br />	while(hudVector != posVector)<br />	{<br />		time = GetTime();<br />		hudVector = VectorLerp(hudVector, posVector, (time - initTime) / (fadeTime * 1000));<br />		self.x = hudVector[0];<br />		self.y = hudVector[1];<br />		wait(0.0001);<br />	}<br />}<br />//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br />//END ZOMBIE COUNTER<br />//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[/CODE]<br /> <br />Feel free to ask any questions regarding the installation and any other modifications you may like.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Ping998<br />Nice tutorial but your Test Footage doesn&#39;t link to the correct page. Sorry :/</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: CT8918<br /><blockquote><em>Ping998</em><br />Nice tutorial but your Test Footage doesn&#39;t link to the correct page. Sorry :/</blockquote><br /> Oops. Should work now <iframe type="text/html" width="640" height="360" src="https://www.youtube.com/embed/Bf7MQo6MTDU" frameborder="0"></iframe></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Fil he Modder<br />i&#39;m constantly getting an error saying that &#39;undefined is not a field object line 353, and the line is hud.vertAlign = yAlign; hug.alignY = yAlign;<br /> <br />please help :/</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: mathfag<br /><blockquote><em>Fil he Modder</em><br />i&#39;m constantly getting an error saying that &#39;undefined is not a field object line 353, and the line is hud.vertAlign = yAlign; hug.alignY = yAlign;   please help :/</blockquote><br /> <br />[CODE=php] hug.alignY --&gt;  hud.alignY[/CODE]</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Fil he Modder<br />aren&#39;t i retarded?! xDDD</p>
