# Play Fx and spawn trigger on Brutus Corpse
Game Modding | Call of Duty: Black Ops 3 | Scripting

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Thread By: Abnormal202<br /><p style="text-align:left;">So I&#39;m scripting the easter egg for Psh&#39;s map, Gulag, and part of it requires a &quot;soul&quot; to appear out of dead Brutus bodies, that can be picked up. I&#39;ve edited the nsz_brutus.gsc to spawn the Brutus&#39;s at a scripted time (which works) but for some reason I cannot get an fx or trigger to spawn on their corpses. Here&#39;s what I have for the death function I&#39;ve changed:</p>[CODE=php]function new_death()<br />{<br />	self waittill( &quot;death&quot; );<br />	self.light delete(); <br />	level.current_brutuses--;<br />	PlayFx( SPAWN_FX, self.origin ); <br />	if(self.alternate_spawn == false)<br />	{<br />		if( level.current_brutuses &lt; 1 )<br />			thread zm_powerups::specific_powerup_drop( undefined, self.origin);<br />	}<br />	else if(self.alternate_spawn == true &amp;&amp; level.bruti_dead == 2)<br />	{<br />		thread zm_powerups::specific_powerup_drop( &quot;full_ammo&quot;, self.origin);<br />	}<br />	self PlaySound( &quot;brutus_helmet&quot; ); <br />	self PlaySound( &quot;brutus_defeated_0&quot;+randomintrange(0,3) ); <br />	self PlaySound( &quot;brutus_death&quot; ); <br />	<br />	nsz_iprintlnbold( &quot;^2Brutus Died&quot; ); <br />	clone = spawn( &quot;script_model&quot;, self.origin ); <br />	clone.angles = self.angles; <br />	clone SetModel( &quot;bo2_brutus_fb&quot; );<br />	self hide(); <br />	clone UseAnimTree( #animtree ); <br />	clone AnimScripted( &quot;placeholder&quot;, clone.origin, clone.angles, %brutus_death );	<br />	wait( GetAnimLength(%brutus_death) ); <br />	if(self.alternate_spawn == true)<br />	{<br />		level.bruti_dead ++;<br />		IPrintLnBold(level.bruti_dead + &quot; down&quot;);<br />		if(level.bruti_dead == 3)<br />		{<br />			level notify(&quot;all_bruti_dead&quot;);<br />		}<br />		self soulspawn();<br />	}<br /><br />	self delete(); <br />	wait(30); <br />	clone delete(); <br />}<br />function soulspawn()<br />{<br />	invisible_ent = spawn( &quot;script_model&quot;, self.origin + (0,0,40));<br />	invisible_ent SetModel( &quot;tag_origin&quot; );<br />	PlayFxOnTag( SOUL_FX, invisible_ent, &quot;tag_origin&quot; );<br /><br />	trig = spawn(&quot;trigger_use&quot;, invisible_ent.origin);<br />	trig SetHintString(level.soul_hintstring);<br />	trig waittill(&quot;trigger&quot;,player);<br />	invisible_ent Delete();<br />	trig Delete();<br />}<br />[/CODE]<br /><br /><br /><br /><p style="text-align:left;">Everything works how it should except that the FX and trigger don&#39;t spawn. Before you ask, I have precached my FX at the top of the function:</p>[CODE=php]#define SOUL_FX			&quot;zombie/fx_powerup_on_green_zmb&quot; <br />#precache( &quot;fx&quot;, SOUL_FX );<br />[/CODE]<br /><br /><br /><br /><p style="text-align:left;">is there something I&#39;m missing? can you actually spawn a trigger use like that?</p></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: ZoekMeMaar<br />[CODE=php]function new_death()<br />{<br />	self waittill( &quot;death&quot; );<br />	self.light delete(); <br />	level.current_brutuses--;<br />	PlayFx( SPAWN_FX, self.origin ); <br />	if(self.alternate_spawn == false)<br />	{<br />		if( level.current_brutuses &lt; 1 )<br />			thread zm_powerups::specific_powerup_drop( undefined, self.origin);<br />	}<br />	else if(self.alternate_spawn == true &amp;&amp; level.bruti_dead == 2)<br />	{<br />		thread zm_powerups::specific_powerup_drop( &quot;full_ammo&quot;, self.origin);<br />	}<br />	self PlaySound( &quot;brutus_helmet&quot; ); <br />	self PlaySound( &quot;brutus_defeated_0&quot;+randomintrange(0,3) ); <br />	self PlaySound( &quot;brutus_death&quot; ); <br />	<br />	nsz_iprintlnbold( &quot;^2Brutus Died&quot; ); <br />	clone = spawn( &quot;script_model&quot;, self.origin ); <br />	clone.angles = self.angles; <br />	clone SetModel( &quot;bo2_brutus_fb&quot; );<br />	self hide(); <br />	clone UseAnimTree( #animtree ); <br />	clone AnimScripted( &quot;placeholder&quot;, clone.origin, clone.angles, %brutus_death );	<br />	wait( GetAnimLength(%brutus_death) ); <br />	if(self.alternate_spawn == true)<br />	{<br />		level.bruti_dead ++;<br />		IPrintLnBold(level.bruti_dead + &quot; down&quot;);<br />		if(level.bruti_dead == 3)<br />		{<br />			level notify(&quot;all_bruti_dead&quot;);<br />		}<br />		clone thread soulspawn(); // calls the script on the clone<br />	}<br />	<br />	self delete(); <br />	if(self.alternate_spawn != true){<br />	    wait(30); <br />	    clone delete();<br />	}<br />}<br />function soulspawn()<br />{<br />	PlayFxOnTag( SOUL_FX, self, &quot;tag_origin&quot; );// no need to make an invisble model we can use the origin of the clone<br />	trig = spawn(&quot;trigger_use&quot;, self.origin);<br />	trig SetHintString(level.soul_hintstring);<br />	trig SetCursorHint(&quot;HINT_NOICON&quot;);<br />	trig waittill(&quot;trigger&quot;,player);<br />	self Delete(); // delets clone if trigger is used<br />	trig Delete(); // delets trigger if trigger is used<br />}<br />[/CODE]<br /><br /><br /><br /><p style="text-align:left;">So i changed a bit, u were calling stuff on self model as that gets hidden and clone is set in place we need to call script on clone, also i deleted the invisble model no need to use that just use origin of clone</p></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Abnormal202<br /><blockquote><em>ZoekMeMaar</em>[CODE=php]function new_death()<br />{<br />	self waittill( &quot;death&quot; );<br />	self.light delete(); <br />	level.current_brutuses--;<br />	PlayFx( SPAWN_FX, self.origin ); <br />	if(self.alternate_spawn == false)<br />	{<br />		if( level.current_brutuses &lt; 1 )<br />			thread zm_powerups::specific_powerup_drop( undefined, self.origin);<br />	}<br />	else if(self.alternate_spawn == true &amp;&amp; level.bruti_dead == 2)<br />	{<br />		thread zm_powerups::specific_powerup_drop( &quot;full_ammo&quot;, self.origin);<br />	}<br />	self PlaySound( &quot;brutus_helmet&quot; ); <br />	self PlaySound( &quot;brutus_defeated_0&quot;+randomintrange(0,3) ); <br />	self PlaySound( &quot;brutus_death&quot; ); <br />	<br />	nsz_iprintlnbold( &quot;^2Brutus Died&quot; ); <br />	clone = spawn( &quot;script_model&quot;, self.origin ); <br />	clone.angles = self.angles; <br />	clone SetModel( &quot;bo2_brutus_fb&quot; );<br />	self hide(); <br />	clone UseAnimTree( #animtree ); <br />	clone AnimScripted( &quot;placeholder&quot;, clone.origin, clone.angles, %brutus_death );	<br />	wait( GetAnimLength(%brutus_death) ); <br />	if(self.alternate_spawn == true)<br />	{<br />		level.bruti_dead ++;<br />		IPrintLnBold(level.bruti_dead + &quot; down&quot;);<br />		if(level.bruti_dead == 3)<br />		{<br />			level notify(&quot;all_bruti_dead&quot;);<br />		}<br />		clone thread soulspawn(); // calls the script on the clone<br />	}<br />	<br />	self delete(); <br />	if(self.alternate_spawn != true){<br />	    wait(30); <br />	    clone delete();<br />	}<br />}<br />function soulspawn()<br />{<br />	PlayFxOnTag( SOUL_FX, self, &quot;tag_origin&quot; );// no need to make an invisble model we can use the origin of the clone<br />	trig = spawn(&quot;trigger_use&quot;, self.origin);<br />	trig SetHintString(level.soul_hintstring);<br />	trig SetCursorHint(&quot;HINT_NOICON&quot;);<br />	trig waittill(&quot;trigger&quot;,player);<br />	self Delete(); // delets clone if trigger is used<br />	trig Delete(); // delets trigger if trigger is used<br />}<br />[/CODE]<br /><br /><br /><br /><p style="text-align:left;">So i changed a bit, u were calling stuff on self model as that gets hidden and clone is set in place we need to call script on clone, also i deleted the invisble model no need to use that just use origin of clone</p></blockquote><p style="text-align:left;">Oh sorry, guess I should&#39;ve said I figured it out. I had contacted NSZ and he helped me work it out. </p></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Exofile<br /><blockquote><em>Abnormal202</em><p style="text-align:left;">Oh sorry, guess I should&#39;ve said I figured it out. I had contacted NSZ and he helped me work it out.</p></blockquote><p style="text-align:left;">Feel free to post the solution here for anyone that might need the same help in the future.</p></p>
