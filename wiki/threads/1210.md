# Pick up item by shooting the ray gun mark 3
Game Modding | Call of Duty: Black Ops 3 | Scripting

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Thread By: simplyzak09<br />Hi, <br />     How would I go about writing a script that requires the player to shoot 6 items while using the left gun of the Ray Gun Mark 3?<br />and then place them down the same way by shooting the left gun onto a crafting table. <br /> <br />and is that even possible?</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Abnormal202<br /><blockquote><em>simplyzak09</em><br />Hi,       How would I go about writing a script that requires the player to shoot 6 items while using the left gun of the Ray Gun Mark 3? and then place them down the same way by shooting the left gun onto a crafting table.    and is that even possible?</blockquote><br /> I had an easter egg system that would do most of this for you already, so I added a feature where instead of pressing &quot;x&quot; to pick items up, you can shoot them with a specific gun, like you asked for above. <a href="http://aviacreations.com/modme/index.php?view=topic&tid=1130&page=1#post5455">See if it works</a></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: mathfag<br />*FIXED*<br />Maybe this will work maybe not because i think the left ray gun is &quot;special&quot;<br />Place &quot;trigger_damages&quot; around your map (as many as you want) and make models their target (if you want them to delete when shot. Make sure they&#39;re script_models.) and give the triggers the targetname &quot;mark3_left&quot;.<br />Also place a trigger damage on your crafting table and the models that you want to show. Make sure they&#39;re script_models with the targetname &quot;craft_models&quot;. The trigger&#39;s targetname is &quot;craft_trig&quot;.<br /> <br />Of course start the script with thread init_ray(); at the top of your mapname.gsc<br /> <br />[CODE=php]function init_ray()<br />{<br />models = GetEntArray(&quot;craft_models&quot;,&quot;targetname&quot;);<br />foreach(mod in models)<br />	{<br />	mod Hide();	<br />	}<br /><br /><br />thread wait_for_craft();<br />trigs = GetEntArray(&quot;mark3_left&quot;,&quot;targetname&quot;);<br />foreach(trig in trigs)<br />	{<br />	trig thread shoot_ray();	<br />	}<br />}<br /><br /><br />function shoot_ray() //self == trigger == trig<br />{<br />model = GetEnt(self.target, &quot;targetname&quot;);<br />while(1)<br />	{<br />	self waittill( &quot;damage&quot;, amount, attacker, direction_vec, point, type, tagName, modelName, partName, weapon, dFlags, inflictor, chargeLevel );<br />	if(weapon == GetWeapon(&quot;raygun_mark3lh&quot;)) //lh = left hand<br />		{<br />		self Delete();<br />		model Delete();<br />		break;<br />		}<br />	}<br />}<br /><br /><br />function wait_for_craft()<br />{<br />models = GetEntArray(&quot;craft_models&quot;,&quot;targetname&quot;);<br />craft_trig = GetEnt(&quot;craft_trig&quot;,&quot;targetname&quot;);<br /><br /><br />while(1)<br />{<br />craft_trig waittill( &quot;damage&quot;, amount, attacker, direction_vec, point, type, tagName, modelName, partName, weapon, dFlags, inflictor, chargeLevel );<br /><br />trigs = GetEntArray(&quot;mark3_left&quot;,&quot;targetname&quot;);<br />	if(weapon == GetWeapon(&quot;raygun_mark3lh&quot;) &amp;&amp; trigs.size&lt;1)<br />		{<br />		foreach(mod in models)<br />			{<br />			mod Show();	<br />			}<br />		break;<br />		}		<br />wait(0.1);		<br />}<br />}[/CODE]</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Harry Bo21<br />[CODE=php]models = GetEnt(&quot;craft_models&quot;,&quot;targetname&quot;);<br />foreach(mod in model)[/CODE]<br /> <br /> <br />please check your code - its literally littered with mistakes, heres the first example</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: mathfag<br /><blockquote><em>Harry Bo21</em><br />models = GetEnt(&quot;craft_models&quot;,&quot;targetname&quot;); foreach(mod in model)     please check your code - its literally littered with mistakes, heres the first example</blockquote><br />4 is not littered :)<br />+the launcher would complain</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">ModmeBot</span></span>:</strong>

<p>Reply By: Harry Bo21<br />[CODE=php]// Firstly fixed the horrific indentation<br /><br />function init_ray()<br />{<br />	a_models = getEntArray( &quot;craft_models&quot;, &quot;targetname&quot; ); // We will check this exists and iPrint some text if it doesnt incase the user made a mistake in radiant<br />	a_trigers = getEntArray( &quot;mark3_left&quot;, &quot;targetname&quot; ); // Moved this here so we can also abandon and print some text warning the user of the issue if he forgot these<br />	e_craft_trigger = getEnt( &quot;craft_trig&quot;, &quot;targetname&quot; ); // Moved this here to check it exists and iPrint some text if it doesnt incase the user made a mistake in radiant<br />	if ( !isDefined( a_models ) || a_models.size &lt; 1 || !isDefined( a_trigers ) || a_trigers.size &lt; 1 || !isDefined( e_craft_trigger ) )<br />	{<br />		if ( !isDefined( e_craft_trigger ) )<br />			level thread delayed_iprint( &quot;Radiant entity not found - targetname : craft_trig&quot;, 30 ); // Delay these iPrints as they may appear and vanish before the black screen is over <br />		if ( !isDefined( a_models ) || a_models.size &lt; 1 )<br />			level thread delayed_iprint( &quot;Radiant entities not found - targetname : craft_models&quot;, 30 ); // Delay these iPrints as they may appear and vanish before the black screen is over <br />		if ( !isDefined( a_trigers ) || a_trigers.size &lt; 1 )<br />			level thread delayed_iprint( &quot;Radiant entities not found - targetname : mark3_left&quot;, 30 ); // Delay these iPrints as they may appear and vanish before the black screen is over <br />		<br />		return; // Added a debug here in the off chance the guy your helping misnames his ents, didnt place them at all - or simply forgot to compile his map<br />	}<br />	<br />	foreach ( e_model in a_models )<br />		e_model hide();	<br /><br />	foreach ( e_trigger in a_trigers )<br />		e_trigger thread shoot_ray();	<br />	<br />	e_craft_trigger thread wait_for_craft( a_models ); // This function now passes the relevent entities to the function. Two reasons, one being so we can abandon it if any are missing and also to be efficient<br />}<br /><br />function delayed_iprint( text, delay )<br />{<br />	if ( !isDefined( delay ) ) // Again this is another advisable undefined variable / argument check incase of developer mode errors<br />		delay = 0;<br />	<br />	wait delay; // Delay our debug warning text - otherwise it will show and dissapear before the black screen is over<br />	iPrintLnBold( &quot;^1ERROR : &quot; + text );<br />}<br /><br />// You didnt actully need additional triggers for this, you could have used <br /><br />// model setCanDamage( 1 );<br /><br />// and then just ran this logic on the actual model instead<br /><br />function shoot_ray() //self == trigger == trig<br />{<br />	e_model = getEnt( self.target, &quot;targetname&quot; );<br />	if ( !isDefined( e_model ) ) // We will check this exists and iPrint some text if it doesnt incase the user made a mistake in radiant<br />	{<br />		level thread delayed_iprint( &quot;Radiant entities not found - targetname : mark3_left : is not targeting anything&quot;, 30 ); // Delay these iPrints as they may appear and vanish before the black screen is over <br />		return;<br />	}<br />	<br />	while ( isDefined( self ) ) // Changed the loop to break when self is deleted instead of having additional code to break the loop<br />	{<br />		self waittill( &quot;damage&quot;, n_amount, e_attacker, v_direction_vec, v_point, str_type, str_tag_name, str_model_name, str_part_pame, w_weapon, b_d_flags, str_inflictor, n_chargeLevel );<br />		if ( w_weapon.name == &quot;raygun_mark3lh&quot; ) //lh = left hand // Check the weapon file name rather then wasting resources on using getWeapon for no reason<br />		{<br />			e_model delete(); // Delete the model &quot;first&quot; as this thread is running &quot;on&quot; self<br />			self delete(); // Delete &quot;self&quot; last - which will also kill this &quot;while&quot; loop<br />		}<br />	}<br />}<br /><br />// Same again here<br /><br />// You didnt actully need additional triggers for this, you could have used <br /><br />// model setCanDamage( 1 );<br /><br />// and then just ran this logic on the actual model instead<br /><br />function wait_for_craft( a_models )<br />{<br />	// models = getEntArray( &quot;craft_models&quot;, &quot;targetname&quot; ); // We have obtained this information already - this is now the &quot;a_models&quot; array passed to the function<br />	// craft_trig = getEnt( &quot;craft_trig&quot;, &quot;targetname&quot; ); // We have obtained this information already - this is now &quot;self&quot;<br /><br />	while ( 1 )<br />	{<br />		self waittill( &quot;damage&quot;, n_amount, e_attacker, v_direction_vec, v_point, str_type, str_tag_name, str_model_name, str_part_pame, w_weapon, b_d_flags, str_inflictor, n_chargeLevel ); // Thread is now running &quot;on&quot; the entity<br /><br />		a_triggers = getEntArray( &quot;mark3_left&quot;, &quot;targetname&quot; );<br />		// Check the weapon file name rather then wasting resources on using getWeapon for no reason<br />		if ( w_weapon.name == &quot;raygun_mark3lh&quot; &amp;&amp; ( !isDefined( a_triggers ) || a_triggers.size &lt; 1 ) ) // Added a undefined check, this would have errored in developer because trigs would == undefined, not 0<br />		{<br />			foreach ( e_model in a_models )<br />				e_model show();	<br />			<br />			break;<br />		}		<br />		// wait .1;	// Dont need this because the loop has a &quot;waittill&quot; in it, only &quot;infinite&quot; loops need a wait, having one could potentially cause a correct shot to not register	<br />	}<br />}[/CODE]</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Bowser32</span></span>:</strong>

<p>Is there a place I could find more info on the damage arguments.<br />( &quot;damage&quot;, n_amount, e_attacker, v_direction_vec, v_point, str_type, str_tag_name, str_model_name, str_part_pame, w_weapon, b_d_flags, str_inflictor, n_chargeLevel );<br />For instance to find out if e_attacker returns a player object or an entity object.<br />If not then how I would get the player object from e_attacker.<br /><br />EDIT: NVM Found out i can check with<br />[ICODE]IsPlayer(e_attacker);[/ICODE]</p>
