# Custom Elevator Script
Game Modding | Call of Duty: Black Ops 3 | Scripting

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p>I&#39;m trying to make a custom elevator script that works with using structs to determine how the doors move instead of just using movex or movey, as I want it to work in any orientation, but I&#39;m not really sure what I&#39;m doing wrong. My doors won&#39;t close, let alone have the whole elevator move up and down. Any help would be appreciated.<br /><br />
{% highlight php %}
#using scripts\codescripts\struct;

#using scripts\shared\array_shared;
#using scripts\shared\callbacks_shared;
#using scripts\shared\clientfield_shared;
#using scripts\shared\compass;
#using scripts\shared\exploder_shared;
#using scripts\shared\flag_shared;
#using scripts\shared\laststand_shared;
#using scripts\shared\math_shared;
#using scripts\shared\scene_shared;
#using scripts\shared\util_shared;
#using scripts\zm\_zm_perks;
#insert scripts\shared\shared.gsh;
#insert scripts\shared\version.gsh;

#insert scripts\zm\_zm_utility.gsh;

#using scripts\zm\_load;
#using scripts\zm\_zm;
#using scripts\zm\_zm_audio;
#using scripts\zm\_zm_powerups;
#using scripts\zm\_zm_utility;
#using scripts\zm\_zm_weapons;
#using scripts\zm\_zm_zonemgr;
#using scripts\shared\ai\zombie_utility;
#using scripts\zm\zm_usermap;

#namespace elevator;

function init()
{   
    level flag::wait_till( &quot;initial_blackscreen_passed&quot; );
    level.elevator=GetEntArray(&quot;elevator&quot;,&quot;targetname&quot;);
    level.move=200;
    level.opentime=2;
    level.closetime=5;
    level.cooldown=0;
    level.location=0;
    level.total=GetEntArray(&quot;true&quot;,&quot;collection&quot;);
    thread up();
    thread down();
    thread call();
    thread cooldown();
}
function up(){
    if(level.cooldown==0){
    level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);
    level.up SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);
    left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);
    right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);
    

    oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);
    oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);
    cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);
    cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);
    
    struct_open_left2=oleft2 GetOrigin();
    struct_open_right2=oright2 GetOrigin();
    struct_close_left=cleft GetOrigin();
    struct_close_right=cright GetOrigin();
    

        while(1){
        level.up waittill(&quot;trigger&quot;,player);
        thread cooldown();
        
        wait(1);
        
        left_door MoveTo(struct_close_left,level.closetime);
        right_door MoveTo(struct_close_right,level.closetime);
        
        wait(.1);
        foreach(block in level.total){
            block SetMovingPlatformEnabled( true );
            block MoveZ(level.move,5);
        }
        wait(5);
        foreach(door in left_door){
            door MoveTo(struct_open_left2,level.opentime);
        }
        foreach(door in right_door){
            door MoveTo(struct_open_right2,level.opentime);
        }
        
        level.location=1;
        wait(.1);
    }

}
else
    level.up SetHintString(&quot;Must wait for recharge&quot;);
    level.up SetCursorHint(&quot;HINT_NOICON&quot;);


}

function down(){
    level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);
    if(level.cooldown==0){
    
    level.down SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);
    left_door=GetEntArray(&quot;door_left&quot;,&quot;targetname&quot;);
    right_door=GetEntArray(&quot;door_right&quot;,&quot;targetname&quot;);
     oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);
    oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);
    cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);
    cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);

    struct_open_left=oleft GetOrigin();
    struct_open_right=oright GetOrigin();
    struct_close_left2=cleft2 GetOrigin();
    struct_close_right2=cright2 GetOrigin();

        while(1){
        level.down waittill(&quot;trigger&quot;,player);
        thread cooldown();
        wait(1);
        foreach(door in left_door){
            door MoveTo(struct_close_left2,level.closetime);
        }
        foreach(door in right_door){
            door MoveTo(struct_close_right2,level.closetime);
        }
        wait(.1);
        foreach(block in level.total){
            block SetMovingPlatformEnabled( true );
            block MoveZ(-level.move,5);
        }
        wait(5);
        foreach(door in left_door){
            door MoveTo(struct_open_left,level.opentime);
        }
        foreach(door in right_door){
            door MoveTo(struct_open_right,level.opentime);
        }
        level.location=0;
        
        wait(.1);
    }
}
else
    level.down SetHintString(&quot;Must wait for recharge&quot;);
    level.down SetCursorHint(&quot;HINT_NOICON&quot;);

}

function cooldown(){
    level.cooldown=1;
    wait(25);
    level.cooldown=0;
}

function cooldown2(){
    level.cooldown=1;
    wait(15);
    level.cooldown=0;
}

function call(){
    while(1){
        if(level.cooldown==0){
        if(level.location==1){
            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);
            callup SetHintString(&quot;&quot;);
            callup SetCursorHint(&quot;HINT_NOICON&quot;);
            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);
            calldown SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);
            calldown waittill(&quot;trigger&quot;,player);
            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);
            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);
            oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);
            oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);
            cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);
            cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);

            struct_open_left=oleft GetOrigin();
            struct_open_right=oright GetOrigin();
            struct_close_left2=cleft2 GetOrigin();
            struct_close_right2=cright2 GetOrigin();
      
            wait(1);
            thread cooldown2();
            foreach(door in left_door){
            door MoveTo(struct_close_left2,level.closetime);
            }
            foreach(door in right_door){
            door MoveTo(struct_close_right2,level.closetime);
            }
            wait(.1);
            foreach(block in level.total){
                block SetMovingPlatformEnabled( true );
                block MoveZ(-level.move,5);
            }
            wait(5);
            foreach(door in left_door){
            door MoveTo(struct_open_left,level.opentime);
            }
            foreach(door in right_door){
                door MoveTo(struct_open_right,level.opentime);
            }
            level.location=0;
            
            wait(.1);
            
        }

        if(level.location==0){
            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);
            calldown SetHintString(&quot;&quot;);
            calldown SetCursorHint(&quot;HINT_NOICON&quot;);
            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);
            callup SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);
            callup waittill(&quot;trigger&quot;,player);
            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);
            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);

            oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);
            oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);
            cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);
            cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);

            struct_open_left2=oleft2 GetOrigin();
            struct_open_right2=oright2 GetOrigin();
            struct_close_left=cleft GetOrigin();
            struct_close_right=cright GetOrigin();


      
            wait(1);
            thread cooldown2();
            foreach(door in left_door){
            door MoveTo(struct_close_left2,level.closetime);
            }
            foreach(door in right_door){
            door MoveTo(struct_close_right2,level.closetime);
            }
            wait(.1);
            foreach(block in level.total){
                block SetMovingPlatformEnabled( true );
                block MoveZ(level.move,5);
            }
            wait(5);
            foreach(door in left_door){
            door MoveTo(struct_open_left,level.opentime);
            }
            foreach(door in right_door){
                door MoveTo(struct_open_right,level.opentime);
            }
            level.location=1;
            
            wait(.1);
            
        }


    }
    else{
        callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);
        callup SetCursorHint(&quot;HINT_NOICON&quot;);
        calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);
        calldown SetCursorHint(&quot;HINT_NOICON&quot;);
        if(level.location==1){
            calldown SetHintString(&quot;Cannot Call, Must Recharge&quot;);
        }
        if(level.location==0){
            callup SetHintString(&quot;Cannot Call, Must Recharge&quot;);
        }

    }

    
}
}
{% endhighlight %}

<br /><br />As a side note, I&#39;ve tried using GetEnt for the structs in the door and that doesn&#39;t seem to work either. Thanks.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Harry Bo21</span></span>:</strong>

<p>coz a &quot;struct&quot; isnt a &quot;ent&quot;<br /><br />struct::get</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p><blockquote>coz a &quot;struct&quot; isnt a &quot;ent&quot;<br /><br />struct::get<br /></blockquote><br />I was just saying I tried that, I have struct::get currently in my code, I was just letting people know that it wouldn&#39;t and I needed help in a different way.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Pepergogo</span></span>:</strong>

<p><a href="https://forum.modme.co/threads/tutorial-buyable-elevator.650/">https://forum.modme.co/threads/tutorial-buyable-elevator.650/</a></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p><blockquote><a href="https://forum.modme.co/threads/tutorial-buyable-elevator.650/">https://forum.modme.co/threads/tutorial-buyable-elevator.650/</a><br /></blockquote><br />That tutorial uses the movex and movey command instead of using structs for the whole thing, It doesn&#39;t function at correct orientations, I want to make one that does. So I need help knowing what&#39;s wrong with my code.  I&#39;ve designed a prefab and written code that should theoretically work. But right now it doesn&#39;t so I wanna know what I did wrong. Thanks.</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">KillJoy</span></span>:</strong>

<p>the location you&#39;re moving to (the struct) needs an origin<br />ie<br /><br />[CODE=cpp]kj_keeper MoveTo(keeper_loc01.origin,1.5);[/CODE]</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p><blockquote>the location you&#39;re moving to (the struct) needs an origin<br />ie<br /><br />[CODE=cpp]kj_keeper MoveTo(keeper_loc01.origin,1.5);[/CODE]<br /></blockquote><br />So I got everything working except for some reason my trigs get scrambled and trigs that shouldn&#39;t pop up do. I thought I had it all done, was making a recording to show off, and it broke on me lol. Any help would be great, thanks.<br /><br />
[CODE=clike]#using scripts\codescripts\struct;<br /><br />#using scripts\shared\array_shared;<br />#using scripts\shared\callbacks_shared;<br />#using scripts\shared\clientfield_shared;<br />#using scripts\shared\compass;<br />#using scripts\shared\exploder_shared;<br />#using scripts\shared\flag_shared;<br />#using scripts\shared\laststand_shared;<br />#using scripts\shared\math_shared;<br />#using scripts\shared\scene_shared;<br />#using scripts\shared\util_shared;<br />#using scripts\zm\_zm_perks;<br />#insert scripts\shared\shared.gsh;<br />#insert scripts\shared\version.gsh;<br /><br />#insert scripts\zm\_zm_utility.gsh;<br /><br />#using scripts\zm\_load;<br />#using scripts\zm\_zm;<br />#using scripts\zm\_zm_audio;<br />#using scripts\zm\_zm_powerups;<br />#using scripts\zm\_zm_utility;<br />#using scripts\zm\_zm_weapons;<br />#using scripts\zm\_zm_zonemgr;<br />#using scripts\shared\ai\zombie_utility;<br />#using scripts\zm\zm_usermap;<br /><br />#namespace elevator;<br /><br />function init()<br />{   <br />    level flag::wait_till( &quot;initial_blackscreen_passed&quot; );<br />    level.elevator=GetEntArray(&quot;elevator&quot;,&quot;targetname&quot;); //These are all the pieces of the elevator except the door<br />    level.move=200;//how high it goes or how far it drops<br />    level.opentime=2;//time to open doors<br />    level.closetime=5;//time to close doors<br />    level.recharge=20;//time between uses<br />    level.location=0;//indicator of first floor or second floor<br />    level.cooldown=0;<br />    level.total=[];<br />    for(i=0; i&lt;level.elevator.size; i++){<br />        level.total[level.total.size]=level.elevator<em>;//this is really redundant but makes an array with elevator, originally tried adding doors and didn&#39;t work<br />    }<br />    thread up();//calling of the up function<br />    thread down();//down<br />    thread call();//and a function for calling up or down<br />    <br />}<br />function up(){<br />    if(level.cooldown==0){//placeholder froma  previous trial<br />    level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);//Gets the trigger for the elevator to go up<br />    level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);//trigger down<br />    level.callup=GetEnt(&quot;call2&quot;, &quot;targetname&quot;);//calling up trigger<br />    level.calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);//calling down trigger<br />    level.up SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);<br />    left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);//left and right door variables<br />    right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />    <br />    //setting up structs for door movement<br />    oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);<br />    oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);<br />    cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);<br />    cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);<br />    //finding origins of said structs<br />    struct_open_left2=oleft2.origin;<br />    struct_open_right2=oright2.origin;<br />    struct_close_left=cleft.origin;<br />    struct_close_right=cright.origin;<br />    <br />        //while loop to wait for the elevator to go up<br />        while(1){<br />        level.up waittill(&quot;trigger&quot;,player);<br />        level.up Hide();//Trying to hide all the triggers so it stops breaking, ps this isn&#39;t working.<br />        level.down Hide();<br />        level.calldown Hide();<br />        level.callup Hide();<br />        <br />        <br />        wait(1);<br />        <br />        left_door MoveTo(struct_close_left,level.closetime);//This works, this is the door movement for it closing<br />        right_door MoveTo(struct_close_right,level.closetime);<br />        <br />        wait(level.closetime);//this is locking the elevator together as a moving platform, and bringing the player up.<br />        for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(level.move,5);<br />        }<br />        left_door SetMovingPlatformEnabled( true );//bringing doors with it<br />        left_door MoveZ(level.move,5);<br />        right_door SetMovingPlatformEnabled( true );<br />        right_door MoveZ(level.move,5);<br />        wait(5);<br /><br />        left_door MoveTo(struct_open_left2,level.opentime);//opening doors<br />        <br />        <br />        right_door MoveTo(struct_open_right2,level.opentime);<br />        <br />        <br />        level.location=1;//setting of what location the elevator is at<br />        IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />        wait(level.recharge);//wait to show next trigs til after wait time<br />        level.down Show();<br />        level.calldown Show();<br />    }<br /><br />}<br /><br /><br /><br />}<br /><br />function down(){<br />    level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);//This is all the same stuff as above but for the elevator going down<br />    level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);//Once again the main function of the elevator works, but for some reason the trigs get all scrambles<br />    level.callup=GetEnt(&quot;call2&quot;, &quot;targetname&quot;);<br />    level.calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />    if(level.cooldown==0){<br />    <br />    level.down SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);<br />    left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />    right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />     oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);<br />    oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);<br />    cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);<br />    cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);<br /><br />    struct_open_left=oleft.origin;<br />    struct_open_right=oright.origin;<br />    struct_close_left2=cleft2.origin;<br />    struct_close_right2=cright2.origin;<br /><br />        while(1){<br />        level.down waittill(&quot;trigger&quot;,player);<br />        level.up Hide();<br />        level.down Hide();<br />        level.callup Hide();<br />        level.calldown Hide();<br />        <br />        wait(1);<br />        <br />        left_door MoveTo(struct_close_left2,level.closetime);<br />        <br />        <br />        right_door MoveTo(struct_close_right2,level.closetime);<br />        <br />        wait(level.closetime);<br />        for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(-level.move,5);<br />        }<br />        left_door SetMovingPlatformEnabled( true );<br />        left_door MoveZ(-level.move,5);<br />        right_door SetMovingPlatformEnabled( true );<br />        right_door MoveZ(-level.move,5);<br />        wait(5);<br />        <br />        left_door MoveTo(struct_open_left,level.opentime);<br />        <br />        <br />        right_door MoveTo(struct_open_right,level.opentime);<br />        <br />        level.location=0;<br />        IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />        wait(level.recharge);<br />        level.up Show();<br />        level.callup Show();<br />    }<br />}<br /><br />}<br /><br /><br /><br />function call(){<br />    while(1){//Tests for location to determine which call button will actually work<br />        if(level.location==1){//This is the call function, its probably what&#39;s causing the issue, idk if I should split it into callup and calldown? probably.<br />            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);<br />            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />            calldown SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);<br />            calldown Show();<br />            level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);<br />            level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);<br /><br />            calldown waittill(&quot;trigger&quot;,player);<br />            callup Hide();<br />            calldown Hide();<br />            level.up Hide();<br />            level.down Hide();<br />            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />            oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);<br />            oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);<br />            cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);<br />            cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);//setting up structs<br /><br />            struct_open_left=oleft.origin;<br />            struct_open_right=oright.origin;<br />            struct_close_left2=cleft2.origin;<br />            struct_close_right2=cright2.origin;<br />      <br />            wait(1);<br />          <br />            <br />            left_door MoveTo(struct_close_left2,level.closetime);<br />            <br />            <br />            right_door MoveTo(struct_close_right2,level.closetime);<br />            <br />            wait(level.closetime);<br />            for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(-level.move,5);<br />            }<br />            left_door SetMovingPlatformEnabled( true );<br />            left_door MoveZ(-level.move,5);<br />            right_door SetMovingPlatformEnabled( true );<br />            right_door MoveZ(-level.move,5);<br />            wait(5);<br />            <br />            left_door MoveTo(struct_open_left,level.opentime);//pretty much all the same stuff<br />            <br />            <br />            right_door MoveTo(struct_open_right,level.opentime);<br />            <br />            level.location=0;<br />            IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />            wait(level.recharge);<br /><br />            callup Show();<br />            level.up Show();<br />            level.down Show();<br /><br /><br /><br />            <br />            <br />        }<br /><br />        if(level.location==0){<br />            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />            calldown SetCursorHint(&quot;HINT_NOICON&quot;);<br />            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);<br />            callup Show();<br />            callup SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);<br /><br />            level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);<br />            level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);<br />            <br /><br /><br />            callup waittill(&quot;trigger&quot;,player);<br />            callup Hide();<br />            calldown Hide();<br />            level.up Hide();<br />            level.down Hide();<br /><br /><br />            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br /><br />            oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);<br />            oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);<br />            cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);<br />            cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);<br /><br />            struct_open_left2=oleft2.origin;<br />            struct_open_right2=oright2.origin;<br />            struct_close_left=cleft.origin;<br />            struct_close_right=cright.origin;<br /><br /><br />      <br />            wait(1);<br />          <br />            <br />            left_door MoveTo(struct_close_left,level.closetime);<br />            <br />            <br />            right_door MoveTo(struct_close_right,level.closetime);<br />            <br />            wait(level.closetime);<br />            for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(level.move,5);<br />            }<br />            left_door SetMovingPlatformEnabled( true );<br />            left_door MoveZ(level.move,5);<br />            right_door SetMovingPlatformEnabled( true );<br />            right_door MoveZ(level.move,5);<br />            wait(5);<br />            <br />            left_door MoveTo(struct_open_left2,level.opentime);<br />          <br />            right_door MoveTo(struct_open_right2,level.opentime);<br />            <br />            level.location=1;<br />            IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />            wait(level.recharge);<br /><br />            calldown Show();<br />            level.up Show();<br />            level.down Show();<br /><br /><br /><br /><br />            <br />        }<br /><br /><br />    }<br /><br />    <br />}<br /><br />[/CODE]<br />[/SPOILER]</em></em></em></em></em></em></em></em></em>
</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">tmk_boi</span></span>:</strong>

<p><blockquote>So I got everything working except for some reason my trigs get scrambled and trigs that shouldn&#39;t pop up do. I thought I had it all done, was making a recording to show off, and it broke on me lol. Any help would be great, thanks.<br /><br />
[CODE=clike]#using scripts\codescripts\struct;<br /><br />#using scripts\shared\array_shared;<br />#using scripts\shared\callbacks_shared;<br />#using scripts\shared\clientfield_shared;<br />#using scripts\shared\compass;<br />#using scripts\shared\exploder_shared;<br />#using scripts\shared\flag_shared;<br />#using scripts\shared\laststand_shared;<br />#using scripts\shared\math_shared;<br />#using scripts\shared\scene_shared;<br />#using scripts\shared\util_shared;<br />#using scripts\zm\_zm_perks;<br />#insert scripts\shared\shared.gsh;<br />#insert scripts\shared\version.gsh;<br /><br />#insert scripts\zm\_zm_utility.gsh;<br /><br />#using scripts\zm\_load;<br />#using scripts\zm\_zm;<br />#using scripts\zm\_zm_audio;<br />#using scripts\zm\_zm_powerups;<br />#using scripts\zm\_zm_utility;<br />#using scripts\zm\_zm_weapons;<br />#using scripts\zm\_zm_zonemgr;<br />#using scripts\shared\ai\zombie_utility;<br />#using scripts\zm\zm_usermap;<br /><br />#namespace elevator;<br /><br />function init()<br />{  <br />    level flag::wait_till( &quot;initial_blackscreen_passed&quot; );<br />    level.elevator=GetEntArray(&quot;elevator&quot;,&quot;targetname&quot;); //These are all the pieces of the elevator except the door<br />    level.move=200;//how high it goes or how far it drops<br />    level.opentime=2;//time to open doors<br />    level.closetime=5;//time to close doors<br />    level.recharge=20;//time between uses<br />    level.location=0;//indicator of first floor or second floor<br />    level.cooldown=0;<br />    level.total=[];<br />    for(i=0; i&lt;level.elevator.size; i++){<br />        level.total[level.total.size]=level.elevator<em>;//this is really redundant but makes an array with elevator, originally tried adding doors and didn&#39;t work<br />    }<br />    thread up();//calling of the up function<br />    thread down();//down<br />    thread call();//and a function for calling up or down<br />   <br />}<br />function up(){<br />    if(level.cooldown==0){//placeholder froma  previous trial<br />    level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);//Gets the trigger for the elevator to go up<br />    level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);//trigger down<br />    level.callup=GetEnt(&quot;call2&quot;, &quot;targetname&quot;);//calling up trigger<br />    level.calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);//calling down trigger<br />    level.up SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);<br />    left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);//left and right door variables<br />    right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />   <br />    //setting up structs for door movement<br />    oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);<br />    oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);<br />    cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);<br />    cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);<br />    //finding origins of said structs<br />    struct_open_left2=oleft2.origin;<br />    struct_open_right2=oright2.origin;<br />    struct_close_left=cleft.origin;<br />    struct_close_right=cright.origin;<br />   <br />        //while loop to wait for the elevator to go up<br />        while(1){<br />        level.up waittill(&quot;trigger&quot;,player);<br />        level.up Hide();//Trying to hide all the triggers so it stops breaking, ps this isn&#39;t working.<br />        level.down Hide();<br />        level.calldown Hide();<br />        level.callup Hide();<br />       <br />       <br />        wait(1);<br />       <br />        left_door MoveTo(struct_close_left,level.closetime);//This works, this is the door movement for it closing<br />        right_door MoveTo(struct_close_right,level.closetime);<br />       <br />        wait(level.closetime);//this is locking the elevator together as a moving platform, and bringing the player up.<br />        for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(level.move,5);<br />        }<br />        left_door SetMovingPlatformEnabled( true );//bringing doors with it<br />        left_door MoveZ(level.move,5);<br />        right_door SetMovingPlatformEnabled( true );<br />        right_door MoveZ(level.move,5);<br />        wait(5);<br /><br />        left_door MoveTo(struct_open_left2,level.opentime);//opening doors<br />       <br />       <br />        right_door MoveTo(struct_open_right2,level.opentime);<br />       <br />       <br />        level.location=1;//setting of what location the elevator is at<br />        IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />        wait(level.recharge);//wait to show next trigs til after wait time<br />        level.down Show();<br />        level.calldown Show();<br />    }<br /><br />}<br /><br /><br /><br />}<br /><br />function down(){<br />    level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);//This is all the same stuff as above but for the elevator going down<br />    level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);//Once again the main function of the elevator works, but for some reason the trigs get all scrambles<br />    level.callup=GetEnt(&quot;call2&quot;, &quot;targetname&quot;);<br />    level.calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />    if(level.cooldown==0){<br />   <br />    level.down SetHintString(&quot;Hold ^3&amp;&amp;1^7 to use Elevator&quot;);<br />    left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />    right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />     oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);<br />    oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);<br />    cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);<br />    cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);<br /><br />    struct_open_left=oleft.origin;<br />    struct_open_right=oright.origin;<br />    struct_close_left2=cleft2.origin;<br />    struct_close_right2=cright2.origin;<br /><br />        while(1){<br />        level.down waittill(&quot;trigger&quot;,player);<br />        level.up Hide();<br />        level.down Hide();<br />        level.callup Hide();<br />        level.calldown Hide();<br />       <br />        wait(1);<br />       <br />        left_door MoveTo(struct_close_left2,level.closetime);<br />       <br />       <br />        right_door MoveTo(struct_close_right2,level.closetime);<br />       <br />        wait(level.closetime);<br />        for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(-level.move,5);<br />        }<br />        left_door SetMovingPlatformEnabled( true );<br />        left_door MoveZ(-level.move,5);<br />        right_door SetMovingPlatformEnabled( true );<br />        right_door MoveZ(-level.move,5);<br />        wait(5);<br />       <br />        left_door MoveTo(struct_open_left,level.opentime);<br />       <br />       <br />        right_door MoveTo(struct_open_right,level.opentime);<br />       <br />        level.location=0;<br />        IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />        wait(level.recharge);<br />        level.up Show();<br />        level.callup Show();<br />    }<br />}<br /><br />}<br /><br /><br /><br />function call(){<br />    while(1){//Tests for location to determine which call button will actually work<br />        if(level.location==1){//This is the call function, its probably what&#39;s causing the issue, idk if I should split it into callup and calldown? probably.<br />            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);<br />            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />            calldown SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);<br />            calldown Show();<br />            level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);<br />            level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);<br /><br />            calldown waittill(&quot;trigger&quot;,player);<br />            callup Hide();<br />            calldown Hide();<br />            level.up Hide();<br />            level.down Hide();<br />            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br />            oleft=struct::get(&quot;left&quot;,&quot;targetname&quot;);<br />            oright=struct::get(&quot;right&quot;,&quot;targetname&quot;);<br />            cleft2=struct::get(&quot;center_left2&quot;,&quot;targetname&quot;);<br />            cright2=struct::get(&quot;center_right2&quot;,&quot;targetname&quot;);//setting up structs<br /><br />            struct_open_left=oleft.origin;<br />            struct_open_right=oright.origin;<br />            struct_close_left2=cleft2.origin;<br />            struct_close_right2=cright2.origin;<br />     <br />            wait(1);<br />         <br />           <br />            left_door MoveTo(struct_close_left2,level.closetime);<br />           <br />           <br />            right_door MoveTo(struct_close_right2,level.closetime);<br />           <br />            wait(level.closetime);<br />            for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(-level.move,5);<br />            }<br />            left_door SetMovingPlatformEnabled( true );<br />            left_door MoveZ(-level.move,5);<br />            right_door SetMovingPlatformEnabled( true );<br />            right_door MoveZ(-level.move,5);<br />            wait(5);<br />           <br />            left_door MoveTo(struct_open_left,level.opentime);//pretty much all the same stuff<br />           <br />           <br />            right_door MoveTo(struct_open_right,level.opentime);<br />           <br />            level.location=0;<br />            IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />            wait(level.recharge);<br /><br />            callup Show();<br />            level.up Show();<br />            level.down Show();<br /><br /><br /><br />           <br />           <br />        }<br /><br />        if(level.location==0){<br />            calldown=GetEnt(&quot;call1&quot;,&quot;targetname&quot;);<br />            calldown SetCursorHint(&quot;HINT_NOICON&quot;);<br />            callup=GetEnt(&quot;call2&quot;,&quot;targetname&quot;);<br />            callup Show();<br />            callup SetHintString(&quot;Hold ^3&amp;&amp;1^7 to call Elevator&quot;);<br /><br />            level.up=GetEnt(&quot;e_use_up&quot;,&quot;targetname&quot;);<br />            level.down=GetEnt(&quot;e_use_down&quot;,&quot;targetname&quot;);<br />           <br /><br /><br />            callup waittill(&quot;trigger&quot;,player);<br />            callup Hide();<br />            calldown Hide();<br />            level.up Hide();<br />            level.down Hide();<br /><br /><br />            left_door=GetEnt(&quot;door_left&quot;,&quot;targetname&quot;);<br />            right_door=GetEnt(&quot;door_right&quot;,&quot;targetname&quot;);<br /><br />            oleft2=struct::get(&quot;left2&quot;,&quot;targetname&quot;);<br />            oright2=struct::get(&quot;right2&quot;,&quot;targetname&quot;);<br />            cleft=struct::get(&quot;center_left&quot;,&quot;targetname&quot;);<br />            cright=struct::get(&quot;center_right&quot;,&quot;targetname&quot;);<br /><br />            struct_open_left2=oleft2.origin;<br />            struct_open_right2=oright2.origin;<br />            struct_close_left=cleft.origin;<br />            struct_close_right=cright.origin;<br /><br /><br />     <br />            wait(1);<br />         <br />           <br />            left_door MoveTo(struct_close_left,level.closetime);<br />           <br />           <br />            right_door MoveTo(struct_close_right,level.closetime);<br />           <br />            wait(level.closetime);<br />            for(i=0; i&lt;level.total.size; i++){<br />            level.total<em>SetMovingPlatformEnabled( true );<br />            level.total<em>MoveZ(level.move,5);<br />            }<br />            left_door SetMovingPlatformEnabled( true );<br />            left_door MoveZ(level.move,5);<br />            right_door SetMovingPlatformEnabled( true );<br />            right_door MoveZ(level.move,5);<br />            wait(5);<br />           <br />            left_door MoveTo(struct_open_left2,level.opentime);<br />         <br />            right_door MoveTo(struct_open_right2,level.opentime);<br />           <br />            level.location=1;<br />            IPrintLnBold(&quot;Elevator Must Recharge&quot;);<br />            wait(level.recharge);<br /><br />            calldown Show();<br />            level.up Show();<br />            level.down Show();<br /><br /><br /><br /><br />           <br />        }<br /><br /><br />    }<br /><br />   <br />}<br /><br />[/CODE]<br />[/SPOILER]<br />[/QUOTE]<br />u sure u didnt make the triggers move?</em></em></em></em></em></em></em></em></em>
</blockquote></p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p><blockquote>u sure u didnt make the triggers move?<br /></blockquote><br />I didn&#39;t ever make the triggers move, it&#39;s not that the triggers are moving, its that after a few uses, triggers that shouldnt be popping up are and the ones that should aren&#39;t</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">tmk_boi</span></span>:</strong>

<p><blockquote>I didn&#39;t ever make the triggers move, it&#39;s not that the triggers are moving, its that after a few uses, triggers that shouldnt be popping up are and the ones that should aren&#39;t<br /></blockquote><br />triggers cant really be created and i dont know what you mean so show me a gif or whatever</p>

---
<strong style="font-size: 1.4em;"><span style="text-decoration: underline;text-decoration-color: #34a7f9;"><span style="color:#34a7f9;">Kricket</span></span>:</strong>

<p><blockquote>triggers cant really be created and i dont know what you mean so show me a gif or whatever<br /></blockquote><br />I&#39;m using the Hide() and Show() commands to make my triggers appear and disappear depending on location of the elevator, but after a use or two the triggers that I want to appear don&#39;t and the one&#39;s I don&#39;t do appear</p>
